[train/open/hidden] function(triggerId)
    setChatVar(triggerId, "statFold", "0")
end!!

[train/close/hidden] function(triggerId)
    setChatVar(triggerId, "statFold", "1")
end!!

[train/1/hidden] function(triggerId)
    setChatVar(triggerId, "category", "애무계")
end!!

[train/2/hidden] function(triggerId)
    setChatVar(triggerId, "category", "도구계")
end!!

[train/3/hidden] function(triggerId)
    setChatVar(triggerId, "category", "V계")
end!!

[train/4/hidden] function(triggerId)
    setChatVar(triggerId, "category", "A계")
end!!

[train/5/hidden] function(triggerId)
    setChatVar(triggerId, "category", "봉사계")
end!!

[train/6/hidden] function(triggerId)
    setChatVar(triggerId, "category", "소모품")
end!!

[train/9/hidden] function(triggerId)
    setChatVar(triggerId, "category", "하드계")
end!!

[train/11/{{#when::category::vis::애무계}}
가만 지켜본다
{{/when}}] function(triggerId)
    sysFunction(triggerId, "train.sys", "action", "observe")
end!!

[train/12/{{#when::category::vis::애무계}}
대화한다
{{/when}}] function(triggerId)
    sysFunction(triggerId, "train.sys", "action", "talk")
end!!

[train/13/{{#when::category::vis::애무계}}
애무
{{/when}}] function(triggerId)
    sysFunction(triggerId, "train.sys", "action", "caress")
end!!

[train/14/{{#when::category::vis::애무계}}
{{#when::{{dict_element::{{getvar::target}}::성별}}::isnot::남성}}
커닐링구스
{{/when}}
{{/when}}] function(triggerId)
    sysFunction(triggerId, "train.sys", "action", "cunnilingus")
end!!

[train/15/{{#when::category::vis::애무계}}
애널애무
{{/when}}] function(triggerId)
    sysFunction(triggerId, "train.sys", "action", "anal_caress")
end!!

[train/16/{{#when::category::vis::애무계}}
자위
{{/when}}] function(triggerId)
    sysFunction(triggerId, "train.sys", "action", "masturbation")
end!!

[train/17/{{#when::category::vis::애무계}}
가슴 애무
{{/when}}] function(triggerId)
    sysFunction(triggerId, "train.sys", "action", "breast_caress")
end!!

[train/18/{{#when::category::vis::애무계}}
키스
{{/when}}] function(triggerId)
    sysFunction(triggerId, "train.sys", "action", "kiss")
end!!

[train/19/{{#when::category::vis::애무계}}
{{#when::{{dict_element::{{getvar::target}}::성별}}::isnot::남성}}
조개벌리기
{{/when}}
{{/when}}] function(triggerId)
    sysFunction(triggerId, "train.sys", "action", "spread_pussy")
end!!

[train/110/{{#when::category::vis::애무계}}
{{#when::{{dict_element::{{getvar::target}}::성별}}::isnot::남성}}
손가락 넣기
{{/when}}
{{/when}}] function(triggerId)
    sysFunction(triggerId, "train.sys", "action", "fingering")
end!!

[train/111/{{#when::category::vis::애무계}}
애널 핥기
{{/when}}] function(triggerId)
    sysFunction(triggerId, "train.sys", "action", "anal_lick")
end!!

[train/112/{{#when::category::vis::애무계}}
{{#when::{{dict_element::{{getvar::target}}::성별}}::isnot::남성}}
{{#when::{{dict_element::{{getvar::user}}::성별}}::isnot::남성}}
가랑이 비비기
{{/when}}
{{/when}}
{{/when}}] function(triggerId)
    sysFunction(triggerId, "train.sys", "action", "grinding")
end!!

[train/21/{{#when::category::vis::도구계}}
{{#when::{{? {{dict_element::{{getvar::inventory}}::heart_stone}}==1}}}}
심장석 애무
{{/when}}
{{/when}}] function(triggerId)
    sysFunction(triggerId, "train.sys", "action", "heart_stone")
end!!

[train/22/{{#when::category::vis::도구계}}
{{#when::{{? {{dict_element::{{getvar::inventory}}::honey_worm}}==1}}}}
{{#when::{{dict_element::{{getvar::target}}::성별}}::isnot::남성}}
꿀단지웜
{{/when}}
{{/when}}
{{/when}}] function(triggerId)
    sysFunction(triggerId, "train.sys", "action", "honey_worm")
end!!

[train/23/{{#when::category::vis::도구계}}
{{#when::{{? {{dict_element::{{getvar::inventory}}::anal_worm}}==1}}}}
애널웜
{{/when}}
{{/when}}] function(triggerId)
    sysFunction(triggerId, "train.sys", "action", "anal_worm")
end!!

[train/24/{{#when::category::vis::도구계}}
{{#when::{{? {{dict_element::{{getvar::inventory}}::anal_plug}}==1}}}}
애널플러그
{{/when}}
{{/when}}] function(triggerId)
    sysFunction(triggerId, "train.sys", "action", "anal_plug")
end!!

[train/25/{{#when::category::vis::도구계}}
{{#when::{{? {{dict_element::{{getvar::inventory}}::anal_beads}}==1}}}}
애널비즈
{{/when}}
{{/when}}] function(triggerId)
    sysFunction(triggerId, "train.sys", "action", "anal_beads")
end!!

[train/26/{{#when::category::vis::도구계}}
{{#when::{{? {{dict_element::{{getvar::inventory}}::blindfold}}==1}}}}
눈가리개
{{/when}}
{{/when}}] function(triggerId)
    sysFunction(triggerId, "train.sys", "action", "blindfold")
end!!

[train/27/{{#when::category::vis::도구계}}
{{#when::{{? {{dict_element::{{getvar::inventory}}::ball_gag}}==1}}}}
볼개그
{{/when}}
{{/when}}] function(triggerId)
    sysFunction(triggerId, "train.sys", "action", "ball_gag")
end!!

[train/28/{{#when::category::vis::도구계}}
{{#when::{{? {{dict_element::{{getvar::inventory}}::ring_gag}}==1}}}}
O링개그
{{/when}}
{{/when}}] function(triggerId)
    sysFunction(triggerId, "train.sys", "action", "ring_gag")
end!!

[train/29/{{#when::category::vis::도구계}}
{{#when::{{? {{dict_element::{{getvar::inventory}}::slime_snail}}==1}}}}
클리캡
{{/when}}
{{/when}}] function(triggerId)
    sysFunction(triggerId, "train.sys", "action", "clit_cap")
end!!

[train/210/{{#when::category::vis::도구계}}
{{#when::{{? {{dict_element::{{getvar::inventory}}::milk_snail}}==1}}}}
유두캡
{{/when}}
{{/when}}] function(triggerId)
    sysFunction(triggerId, "train.sys", "action", "nipple_cap")
end!!

[train/211/{{#when::category::vis::도구계}}
{{#when::{{? {{dict_element::{{getvar::inventory}}::milker}}==1}}}}
{{#when::{{dict_element::{{getvar::target}}::성별}}::isnot::남성}}
착유기
{{/when}}
{{/when}}
{{/when}}] function(triggerId)
    sysFunction(triggerId, "train.sys", "action", "milker")
end!!

[train/212/{{#when::category::vis::도구계}}
{{#when::{{? {{dict_element::{{getvar::inventory}}::whip}}==1}}}}
채찍
{{/when}}
{{/when}}] function(triggerId)
    sysFunction(triggerId, "train.sys", "action", "whip")
end!!

[train/31/{{#when::category::vis::V계}}
정상위
{{/when}}] function(triggerId)
    sysFunction(triggerId, "train.sys", "action", "missionary")
end!!

[train/32/{{#when::category::vis::V계}}
후배위
{{/when}}] function(triggerId)
    sysFunction(triggerId, "train.sys", "action", "doggy")
end!!

[train/33/{{#when::category::vis::V계}}
대면좌위
{{/when}}] function(triggerId)
    sysFunction(triggerId, "train.sys", "action", "front_seated")
end!!

[train/34/{{#when::category::vis::V계}}
배면좌위
{{/when}}] function(triggerId)
    sysFunction(triggerId, "train.sys", "action", "back_seated")
end!!

[train/35/{{#when::category::vis::V계}}
기승위
{{/when}}] function(triggerId)
    sysFunction(triggerId, "train.sys", "action", "cowgirl")
end!!

[train/36/{{#when::category::vis::V계}}
들박
{{/when}}] function(triggerId)
    sysFunction(triggerId, "train.sys", "action", "standing")
end!!

[train/37/{{#when::category::vis::V계}}
{{#when::{{dict_element::{{getvar::user}}::페니스}}::isnot::실좆}}
{{#when::{{dict_element::{{getvar::user}}::페니스}}::isnot::작음}}
{{#when::{{dict_element::{{getvar::user}}::페니스}}::isnot::평범}}
뒷들박
{{/when}}
{{/when}}
{{/when}}
{{/when}}] function(triggerId)
    sysFunction(triggerId, "train.sys", "action", "back_standing")
end!!

[train/38/{{#when::category::vis::V계}}
교배프레스
{{/when}}] function(triggerId)
    sysFunction(triggerId, "train.sys", "action", "mating_press")
end!!

[train/39/{{#when::category::vis::V계}}
{{#when::{{dict_element::{{getvar::user}}::페니스}}::isnot::실좆}}
{{#when::{{dict_element::{{getvar::user}}::페니스}}::isnot::작음}}
{{#when::{{dict_element::{{getvar::user}}::페니스}}::isnot::평범}}
풀넬슨
{{/when}}
{{/when}}
{{/when}}
{{/when}}] function(triggerId)
    sysFunction(triggerId, "train.sys", "action", "full_nelson")
end!!

[train/41/{{#when::category::vis::A계}}
정상위애널
{{/when}}] function(triggerId)
    sysFunction(triggerId, "train.sys", "action", "anal_missionary")
end!!

[train/42/{{#when::category::vis::A계}}
후배위애널
{{/when}}] function(triggerId)
    sysFunction(triggerId, "train.sys", "action", "anal_doggy")
end!!

[train/43/{{#when::category::vis::A계}}
대면좌위애널
{{/when}}] function(triggerId)
    sysFunction(triggerId, "train.sys", "action", "anal_front_seated")
end!!

[train/44/{{#when::category::vis::A계}}
배면좌위애널
{{/when}}] function(triggerId)
    sysFunction(triggerId, "train.sys", "action", "anal_back_seated")
end!!

[train/45/{{#when::category::vis::A계}}
기승위애널
{{/when}}] function(triggerId)
    sysFunction(triggerId, "train.sys", "action", "anal_cowgirl")
end!!

[train/46/{{#when::category::vis::A계}}
들박애널
{{/when}}] function(triggerId)
    sysFunction(triggerId, "train.sys", "action", "anal_standing")
end!!

[train/47/{{#when::category::vis::A계}}
{{#when::{{dict_element::{{getvar::user}}::페니스}}::isnot::실좆}}
{{#when::{{dict_element::{{getvar::user}}::페니스}}::isnot::작음}}
{{#when::{{dict_element::{{getvar::user}}::페니스}}::isnot::평범}}
뒷들박애널
{{/when}}
{{/when}}
{{/when}}
{{/when}}] function(triggerId)
    sysFunction(triggerId, "train.sys", "action", "anal_back_standing")
end!!

[train/48/{{#when::category::vis::A계}}
교배프레스애널
{{/when}}] function(triggerId)
    sysFunction(triggerId, "train.sys", "action", "anal_mating_press")
end!!

[train/49/{{#when::category::vis::A계}}
{{#when::{{dict_element::{{getvar::user}}::페니스}}::isnot::실좆}}
{{#when::{{dict_element::{{getvar::user}}::페니스}}::isnot::작음}}
{{#when::{{dict_element::{{getvar::user}}::페니스}}::isnot::평범}}
풀넬슨애널
{{/when}}
{{/when}}
{{/when}}
{{/when}}] function(triggerId)
    sysFunction(triggerId, "train.sys", "action", "anal_full_nelson")
end!!

[train/51/{{#when::category::vis::봉사계}}
{{#when::{{dict_element::{{getvar::user}}::성별}}::isnot::여성}}
수음
{{/when}}
{{/when}}] function(triggerId)
    sysFunction(triggerId, "train.sys", "action", "handjob")
end!!

[train/52/{{#when::category::vis::봉사계}}
{{#when::{{dict_element::{{getvar::user}}::성별}}::isnot::여성}}
펠라치오
{{/when}}
{{/when}}] function(triggerId)
    sysFunction(triggerId, "train.sys", "action", "fellatio")
end!!

[train/53/{{#when::category::vis::봉사계}}
{{#when::{{dict_element::{{getvar::user}}::성별}}::isnot::여성}}
{{#when::{{dict_element::{{getvar::target}}::성별}}::isnot::남성}}
{{#when::{{dict_element::{{getvar::user}}::페니스}}::isnot::실좆}}
{{#when::{{dict_element::{{getvar::user}}::페니스}}::isnot::작음}}
{{#when::{{dict_element::{{getvar::target}}::가슴}}::isnot::절벽}}
{{#when::{{dict_element::{{getvar::target}}::가슴}}::isnot::빈유}}
파이즈리
{{/when}}
{{/when}}
{{/when}}
{{/when}}
{{/when}}
{{/when}}
{{/when}}] function(triggerId)
    sysFunction(triggerId, "train.sys", "action", "paizuri")
end!!

[train/54/{{#when::category::vis::봉사계}}
{{#when::{{dict_element::{{getvar::target}}::성별}}::isnot::남성}}
{{#when::{{dict_element::{{getvar::user}}::성별}}::isnot::여성}}
{{#when::{{dict_element::{{getvar::user}}::페니스}}::isnot::실좆}}
{{#when::{{dict_element::{{getvar::user}}::페니스}}::isnot::작음}}
스마타
{{/when}}
{{/when}}
{{/when}}
{{/when}}
{{/when}}] function(triggerId)
    sysFunction(triggerId, "train.sys", "action", "sumata")
end!!

[train/55/{{#when::category::vis::봉사계}}
{{#when::{{dict_element::{{getvar::user}}::성별}}::isnot::여성}}
풋잡
{{/when}}
{{/when}}] function(triggerId)
    sysFunction(triggerId, "train.sys", "action", "footjob")
end!!

[train/56/{{#when::category::vis::봉사계}}
식스나인
{{/when}}] function(triggerId)
    sysFunction(triggerId, "train.sys", "action", "six_nine")
end!!

[train/57/{{#when::category::vis::봉사계}}
{{#when::{{? {{tonumber::{{dict_element::{{getvar::inventory}}::오일}}}}>0}}}}
오일 마사지
{{/when}}
{{/when}}] function(triggerId)
    sysFunction(triggerId, "train.sys", "action", "oil_massage")
end!!

[train/58/{{#when::category::vis::봉사계}}
리밍
{{/when}}] function(triggerId)
    sysFunction(triggerId, "train.sys", "action", "rimming")
end!!

[train/59/{{#when::category::vis::봉사계}}
{{#when::{{dict_element::{{getvar::user}}::성별}}::isnot::남성}}
{{#when::{{dict_element::{{getvar::target}}::성별}}::isnot::남성}}
가슴 비비기
{{/when}}
{{/when}}
{{/when}}] function(triggerId)
    sysFunction(triggerId, "train.sys", "action", "breast_rubbing")
end!!

[train/510/{{#when::category::vis::봉사계}}
{{#when::{{dict_element::{{getvar::user}}::성별}}::isnot::남성}}
커닐링구스봉사
{{/when}}
{{/when}}] function(triggerId)
    sysFunction(triggerId, "train.sys", "action", "cunnilingus_service")
end!!


[train/91/{{#when::{{? {{dict_element::{{getvar::inventory}}::collar}}==1}}}}야외플레이
{{/when}}] function(triggerId)
    sysFunction(triggerId, "train.sys", "action", "outdoor_play")
end!!

[train/92/{{#when::category::vis::하드계}}
스팽킹
{{/when}}] function(triggerId)
    sysFunction(triggerId, "train.sys", "action", "spanking")
end!!

[train/93/{{#when::category::vis::하드계}}
{{#when::{{? {{dict_element::{{getvar::inventory}}::rope}}==1}}}}
귀갑묶기
{{/when}}
{{/when}}] function(triggerId)
    sysFunction(triggerId, "train.sys", "action", "tortoise_shell")
end!!

[train/95/{{#when::category::vis::하드계}}
{{#when::{{? {{dict_element::{{getvar::inventory}}::관장기}}==1}}}}
{{#when::{{? {{dict_element::{{getvar::inventory}}::애널플러그}}==1}}}}
관장+플러그
{{/when}}
{{/when}}
{{/when}}] function(triggerId)
    sysFunction(triggerId, "train.sys", "action", "enema_plug")
end!!

[train/96/{{#when::category::vis::하드계}}
방뇨
{{/when}}] function(triggerId)
    sysFunction(triggerId, "train.sys", "action", "urination")
end!!

[train/97/{{#when::category::vis::하드계}}
음뇨
{{/when}}] function(triggerId)
    sysFunction(triggerId, "train.sys", "action", "drink_urine")
end!!

[train/98/hidden] function(triggerId)--추후 동물 구매를 구현한 뒤 추가
    sysFunction(triggerId, "train.sys", "action", "bestiality")
end!!

[train/99/{{#when::{{? {{tonumber::{{dict_element::{{getvar::target}}::V확장}}}}>3}}}}
{{#when::category::vis::하드계}}
피스트퍽
{{/when}}
{{/when}}] function(triggerId)
    sysFunction(triggerId, "train.sys", "action", "fist_v")
end!!

[train/910/{{#when::{{? {{tonumber::{{dict_element::{{getvar::target}}::A확장}}}}>3}}}}
{{#when::category::vis::하드계}}
애널피스트
{{/when}}
{{/when}}] function(triggerId)
    sysFunction(triggerId, "train.sys", "action", "fist_a")
end!!

[train/911/{{#when::{{? {{tonumber::{{dict_element::{{getvar::target}}::V확장}}}}>3}}}}
{{#when::{{? {{tonumber::{{dict_element::{{getvar::target}}::A확장}}}}>3}}}}
{{#when::category::vis::하드계}}
양구멍피스트
{{/when}}
{{/when}}
{{/when}}] function(triggerId)
    sysFunction(triggerId, "train.sys", "action", "double_hole_fist")
end!!

[train/912/{{#when::{{? {{tonumber::{{dict_element::{{getvar::target}}::V확장}}}}>6}}}}
{{#when::category::vis::하드계}}
더블피스트퍽
{{/when}}
{{/when}}] function(triggerId)
    sysFunction(triggerId, "trainAction.sys", "double_fist")
end!!

[train/913/{{#when::{{? {{tonumber::{{dict_element::{{getvar::target}}::A확장}}}}>6}}}}
{{#when::category::vis::하드계}}
애널더블피스트
{{/when}}
{{/when}}] function(triggerId)
    sysFunction(triggerId, "train.sys", "action", "anal_double_fist")
end!!

[train/61/{{#when::{{? {{tonumber::{{dict_element::{{getvar::inventory}}::oil}}}}>0}}}}
{{#when::category::vis::소모품}}
오일
{{/when}}
{{/when}}] function(triggerId)
    local target = getState(triggerId, "target")
    local stat = getState(triggerId, "stat")
    local dc = DC_PENALTY * 0
    local costHP = 10
    local costSP = 20

    --소모품 사용처리
    local inventory = json.decode(getChatVar(triggerId, "inventory"))
    if tonumber(inventory['oil']) < 1 then
        alertNormal(triggerId, "오일이 부족합니다.")
        reloadDisplay(triggerId)
        return
    end
    inventory['oil'] = tostring(inventory['oil'] - 1)
    setChatVar(triggerId, "inventory", json.encode(inventory))

    --윤활 최대 4까지 증가
    local stat = json.decode(getChatVar(triggerId, "stat"))
    local oldVLub = tonumber(stat['V윤활']) or 0
    local oldALub = tonumber(stat['A윤활']) or 0
    local newVLub = math.min(4, oldVLub + 1)
    local newALub = math.min(4, oldALub + 1)
    stat['V윤활'] = tostring(newVLub)
    stat['A윤활'] = tostring(newALub)

    --LLM 실행 (train.sys action 경유)
    local success = sysFunction(triggerId, "train.sys", "action", "use_oil")

    --stat변화가 있더라도 다른 stat은 안건드리게 강제함
    setChatVar(triggerId, "stat", json.encode(stat))
    --stat변화 멘트 강제처리
    local lvUpcomment = ""
    if newVLub > oldVLub then
        lvUpcomment = lvUpcomment.."<br>※ V윤활이 " .. oldVLub .. "에서 " .. newVLub .. "로 증가했습니다!"
    end
    if newALub > oldALub then
        lvUpcomment = lvUpcomment.."<br>※ A윤활이 " .. oldALub .. "에서 " .. newALub .. "로 증가했습니다!"
    end
    setChatVar(triggerId, "statLvUp", lvUpcomment)
end!!

[train/62/{{#when::{{? {{tonumber::{{dict_element::{{getvar::inventory}}::aphrodisiac}}}}>0}}}}
{{#when::category::vis::소모품}}
미약
{{/when}}] function(triggerId)
    --소모품 사전 체크
    local inventory = json.decode(getChatVar(triggerId, "inventory"))
    if tonumber(inventory['aphrodisiac']) < 1 then
        alertNormal(triggerId, "미약이 부족합니다.")
        reloadDisplay(triggerId)
        return
    end

    --LLM 실행 (train.sys action 경유)
    local success = sysFunction(triggerId, "train.sys", "action", "use_aphrodisiac")

    if success then
        --아이템 소모
        sysFunction(triggerId, "item.sys", "consume", "aphrodisiac", 1)

        --욕정 최대 4까지 증가
        local stat = json.decode(getChatVar(triggerId, "stat"))
        local oldLust = tonumber(stat['욕정']) or 0
        local newLust = math.min(4, oldLust + 1)
        stat['욕정'] = tostring(newLust)
        setChatVar(triggerId, "stat", json.encode(stat))

        --stat변화 멘트 설정
        if newLust > oldLust then
            local lvUpcomment = "<br>※ 욕정이 " .. oldLust .. "에서 " .. newLust .. "로 증가했습니다!"
            setChatVar(triggerId, "statLvUp", lvUpcomment)
        end
    end
end!!

[train/63/hidden] function(triggerId)
    --이뇨제
end!!

[train/64/{{#when::{{? {{tonumber::{{dict_element::{{getvar::inventory}}::crystal_ball}}}}>0}}}}
{{#when::category::vis::소모품}}
수정구
{{/when}}] function(triggerId)
    --녹화여부 사전 판단
    if TRAIN_REC > 0 then
        alertNormal(triggerId, "이미 활성화된 수정구가 있습니다.")
        reloadDisplay(triggerId)
        return
    end

    --소모품 사전 체크
    local inventory = json.decode(getChatVar(triggerId, "inventory"))
    if tonumber(inventory['crystal_ball']) < 1 then
        alertNormal(triggerId, "수정구가 부족합니다.")
        reloadDisplay(triggerId)
        return
    end

    --LLM 실행 (train.sys action 경유)
    local success = sysFunction(triggerId, "train.sys", "action", "use_crystal_ball")

    if success then
        --아이템 소모
        sysFunction(triggerId, "item.sys", "consume", "crystal_ball", 1)

        --녹화 상태 설정
        TRAIN_REC = 5

        --수치 최대 4까지 증가
        local stat = json.decode(getChatVar(triggerId, "stat"))
        local oldShame = tonumber(stat['수치']) or 0
        local newShame = math.min(4, oldShame + 1)
        stat['수치'] = tostring(newShame)
        setChatVar(triggerId, "stat", json.encode(stat))

        --stat변화 멘트
        if newShame > oldShame then
            local lvUpcomment = "<br>※ 수치가 " .. oldShame .. "에서 " .. newShame .. "로 증가했습니다!"
            setChatVar(triggerId, "statLvUp", lvUpcomment)
        end
    end
end!!

[train/65/hidden] function(triggerId)--임신시스템 구현 후 추가
    --콘돔
end!!

[train/199/hidden] function(triggerId)
    local feeling = 0
    sysFunction(triggerId, "train.sys", "post")
end!!

[train/200/hidden] function (triggerId, date, name, log)
    local recLog = getState(triggerId, "recLog")
    if recLog == "" then
        recLog = date..name.."의 조교 영상" .. log
        TRAIN_REC = math.max(0, TRAIN_REC - 1)
        setState(triggerId, "recLog", recLog)
    elseif TRAIN_REC == 1 then
        recLog = recLog .. log
        TRAIN_REC = 0

        local content = json.decode(getLoreBookContent(triggerId, "crystalRec"))
        if not content[name] then
            content[name] = {}
        end
        table.insert(content[name], recLog)
        local option = {alwaysActive = false, insertOrder = 100, key = "", secondKey = "", regex = false}
        upsertLocalLoreBook(triggerId, "crystalRec", json.encode(content), option)
        setState(triggerId, "recLog", "")
    else
        recLog = recLog .. log
        TRAIN_REC = math.max(0, TRAIN_REC - 1)
        setState(triggerId, "recLog", recLog)
    end
    
end!!