<style>
/* Character Panel */
.character-display {
    display: flex;
    align-items: center;
    gap: 1.5rem;
    margin-top: 1rem;
}

.character-portrait {
    width: 10rem;
    height: 10rem;
    background-color: #111;
    border: 1px solid #444;
    flex-shrink: 0;
    border-radius: 1em;
    overflow:hidden;
}

.character-info-wrapper {
    flex-grow: 1;
}

.character-details {
    margin: 0 0 0.75rem 0;
}

.player-status p {
    margin: 0;
    background-color: #303030;
    padding: 0.5rem 0.75rem;
    border-radius: 4px;
    font-family: monospace;
    text-align: center;
}

.item-grid, .dungeon-floor-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
    /*gap: 0.75rem;*/
    /*margin-top: 0.5rem;*/
    /*place-items: center;*/
}

.dungeon-floor-grid {
    grid-template-columns: 1fr;
    gap: 0.5rem;
}
.dungeon-floor-grid div {
    background-color: #2a2a2a;
    padding: 0.5rem;
    border-radius: 3px;
}

.total-info {
    margin-top: 1.25rem !important;
    font-weight: bold;
    border-top: 1px solid #444;
    padding-top: 1rem;
}

/* Command Panel */
.command-header p {
    font-size: 0.9em;
    color: #aaaaaa;
    margin-top: -0.5rem;
}

.status-message {
    background-color: #333;
    border-left: 3px solid #ffffbf;
    padding: 0.75rem 1rem;
    margin: 1rem 0;
}
.status-message p {
    margin: 0;
}

@media screen and (max-width: 600px) {
    .character-portrait {
        width: 5rem;
        height: 5rem;
    }
    .tabs {
    font-size:0.8rem;
    }
    .tabs > .btn{
    padding:0 0.3rem;
    }
}

</style>

<div class="container">
<div class="line double"></div>

<header class="header">
<h1>▋메인 메뉴</h1>
<div class="game-info">
<span>({{getvar::day}}일째) {{#when::{{? {{? {{floor{{getvar::day}}%29.5}}}} == 15}}}}《만월》 {{/when}}{{#when::ampm::vis::0}}낮{{:else}}밤{{/when}}</span>
<span>(소지금: {{getvar::gold}} Gold)</span>
</div>
</header>

<div class="line single"></div>

<main>
<section class="character-panel">
<div class="character-display">
<div class="character-portrait"><img src="{{source::user}}" style="margin:0px;border-radius:1em" ></div>
<div class="character-info-wrapper">
<div class="character-details">
<div class="panel-header">
<h2>Lv. {{dict_element::{{getvar::user}}::레벨}} 마왕 {{user}}</h2> 
</div>
</div>
<div class="player-status">
<div class="x-risu-bar-container">
<span class="bar-label">체력:</span>
<div class="progress-bar">
<div class="x-risu-progress-bar-fill x-risu-hp" style="width: {{calc::{{tonumber::{{dict_element::{{getvar::user}}::체력}}}} / {{tonumber::{{dict_element::{{getvar::user}}::최대체력}}}} * 100}}%;"></div>
</div>
<span class="bar-value">{{dict_element::{{getvar::user}}::체력}}/{{dict_element::{{getvar::user}}::최대체력}}</span>
</div>
<div class="x-risu-bar-container">
<span class="bar-label">기력:</span>
<div class="progress-bar">
<div class="x-risu-progress-bar-fill x-risu-st" style="width: {{calc::{{tonumber::{{dict_element::{{getvar::user}}::기력}}}} / {{tonumber::{{dict_element::{{getvar::user}}::최대기력}}}} * 100}}%;"></div>
</div>
<span class="bar-value">{{dict_element::{{getvar::user}}::기력}}/{{dict_element::{{getvar::user}}::최대기력}}</span>
</div>

</div>
</div>
</div>
</section>

<div class="line single"></div>

<section class="management-panel">
<h2>* 경영 및 운영</h2>
<div class="tabs-container">
<input type="radio" name="tabs" id="items" hidden {{#if {{equal::{{getvar::category}}::items}}}}checked{{/if}}>
<label for="items" class="tabs" risu-btn="items">▋스킬/아이템</label>
<input type="radio" name="tabs" id="traps" hidden {{#if {{equal::{{getvar::category}}::traps}}}}checked{{/if}}>
<label for="traps" class="tabs" risu-btn="traps">▋함정</label>
<input type="radio" name="tabs" id="dungeon" hidden {{#if {{equal::{{getvar::category}}::dungeon}}}}checked{{/if}}>
<label for="dungeon" class="tabs" risu-btn="dungeon">▋던전</label>
</div>
<div class="tab-content">
{{#when::category::vis::items}}
<div id="skills-content" class="tab-pane">
<!--너무 쌩 하드코딩인데 each의 slot이 settempvar 안에서 제대로 안돌아가서 쩔수..-->
{{#if {{? {{dict_element::{{getvar::inventory}}::조합지식}}==1||{{dict_element::{{getvar::inventory}}::마계지식}}==1||{{dict_element::{{getvar::inventory}}::금단의지식}}==1}}}}
<div>
<b>∇보유지식∇</b><br><strong>
{{#if {{? {{dict_element::{{getvar::inventory}}::조합지식}}==1}}}}【조합지식】{{/if}}
{{#if {{? {{dict_element::{{getvar::inventory}}::마계지식}}==1}}}}【마계지식】{{/if}}
{{#if {{? {{dict_element::{{getvar::inventory}}::금단의지식}}==1}}}}【금단의지식】{{/if}}
</strong>
</div>
{{/if}}

<p></p>
<div><b>∇조교도구∇</b></div>
<div class="item-grid">
{{settempvar::tools::0}}
{{#each {{getvar::조교도구List}} tool}}
{{#if {{? {{dict_element::{{getvar::inventory}}::{{slot::tool}}}}==1}}}}
<p style="margin:0;">❮{{slot::tool}}❯</p>
{{settempvar::tools::1}}
{{/if}}
{{/each}}
{{#if {{? {{gettempvar::tools}}==0}}}}
<p style="margin:0; justify-self:left;">❮없음❯</p>
{{/if}}
</div>
<p></p>
<div><b>∇소모품∇</b></div>
<div class="item-grid">
{{settempvar::consumables::0}}
{{#each {{getvar::소모품List}} consumable}}
{{#if {{? {{tonumber::{{dict_element::{{getvar::inventory}}::{{slot::consumable}}}}}}>0}}}}
<p style="margin:0;">❮{{slot::consumable}}❯ {{dict_element::{{getvar::inventory}}::{{slot::consumable}}}}개</p>
{{settempvar::consumables::1}}
{{/if}}
{{/each}}
{{#if {{? {{gettempvar::consumables}}==0}}}}
<p style="margin:0; justify-self:left;">❮없음❯</p>
{{/if}}
</div>
</div>
{{/when}}

{{#when::category::vis::traps}}
<div id="traps-content" class="tab-pane">
<p>더미 데이터 입니다.</p>
<div class="item-grid">
<span>끈끈이 함정(5)</span>
<span>독화살 함정(2)</span>
<span>마력흡수 함정(3)</span>
<span>망각의 향기(1)</span>
</div>
</div>
{{/when}}

{{#when::category::vis::dungeon}}
<div id="dungeon-content" class="tab-pane">
<p>더미 데이터 입니다.</p>
<p>던전Lv: 5Lv (경험치: 1250) | 함정Lv: 3Lv | 현재의 용사 초기Lv: 10Lv</p>
<div class="dungeon-floor-grid">
<div><strong>제1계층:</strong> 부하 50체, 용사: 0인, 영격: 0인, 시설: 없음</div>
<div><strong>제2계층:</strong> 부하 35체, 용사: 1인, 영격: 0인, 시설: 인간목장</div>
<div><strong>제3계층:</strong> 부하 20체, 용사: 0인, 영격: 2인, 시설: 미궁</div>
</div>
<p class="total-info">부하총계: 105마리, 용사총계: 1명, 요격총계: 2명</p>
</div>
{{/when}}
</div>
</section>

<div class="line single"></div>

<section class="command-panel">
<!--
<div class="command-header">
<h2>* {{#when::ampm::vis::0}}오전{{:else}}오후{{/when}}의 일정</h2>
<p>※ 휴식을 하는경우 경우 남은시간동안 업무를 처리합니다.</p>
</div>
<div class="status-message">
<p>[새로운 시작] 당신은 막 봉인에서 깨어났습니다.</p>
</div>
-->
<h3>▋Commands</h3>
<div class="command-container">
{{getvar::cmds}}
</div>
</section>
</main>