function (triggerId, stats)
    local markDB = json.decode(getLoreBookContent(triggerId, "mark.db"))
    local EXPtbl = json.decode(getLoreBookContent(triggerId, "EXPtable.db"))
    local target = getState(triggerId, "target")
    local markBase = 25 --ê°ì¸ íšë“ ë² ì´ìŠ¤ ìˆ˜ì¹˜
    local markSum = 0 --ëª¨ë“  ê°ì¸ì˜ í•©ê³„
    local screenEffect = ""

    for k, _ in pairs(markDB) do
        if target[k] > 0 then
            markSum = markSum + 1
        end
    end

    --ë°˜ë°œê°ì¸
    if target["ë°˜ë°œê°ì¸"] < 3 then
        local maxP = math.max(stats["ì €í•­"], (stats["ìˆ˜ì¹˜"]+stats["ê³ í†µ"]+stats["ë¶ˆì¾Œ"])*0.1 + stats["ì €í•­"]*0.5)
        if maxP > markBase * EXPtbl[markSum] then
            if maxP > markBase * EXPtbl[markSum+1] then
                if maxP > markBase * EXPtbl[markSum+2] then
                    target["ë°˜ë°œê°ì¸"] = target["ë°˜ë°œê°ì¸"] + 3
                    screenEffect = "<div class='mark neggative'>ğŸ’¢ ë°˜ë°œê°ì¸+3 íšë“!!</div>"
                end
                target["ë°˜ë°œê°ì¸"] = target["ë°˜ë°œê°ì¸"] + 2
                screenEffect = "<div class='mark neggative'>ğŸ’¢ ë°˜ë°œê°ì¸+2 íšë“!!</div>"
            end
            target["ë°˜ë°œê°ì¸"] = target["ë°˜ë°œê°ì¸"] + 1
            screenEffect = "<div class='mark neggative'>ğŸ’¢ ë°˜ë°œê°ì¸ íšë“!!</div>"
            setChatVar(triggerId, "screenEffect", screenEffect)
            return --í•˜ë‚˜ì˜ ê°ì¸ì„ ì–»ìœ¼ë©´ ë‹¤ë¥¸ ê°ì¸ì€ ì–»ì„ ìˆ˜ ì—†ë„ë¡ í•¨ìˆ˜ ì¢…ë£Œ
        end
    end

    --ê³ í†µê°ì¸
    if target["ê³ í†µê°ì¸"] < 3 then
        local maxP = math.max(stats["ê³ í†µ"], (stats["ê³µí¬"]+stats["ë¶ˆì¾Œ"])*0.15 + stats["ê³ í†µ"]*0.5)
        if maxP > markBase * EXPtbl[markSum] then
            if maxP > markBase * EXPtbl[markSum+1] then
                if maxP > markBase * EXPtbl[markSum+2] then
                    target["ê³ í†µê°ì¸"] = target["ê³ í†µê°ì¸"] + 3
                    screenEffect = "<div class='mark'>ğŸª± ê³ í†µê°ì¸+3 íšë“!!</div>"
                end
                target["ê³ í†µê°ì¸"] = target["ê³ í†µê°ì¸"] + 2
                screenEffect = "<div class='mark'>ğŸª± ê³ í†µê°ì¸+2 íšë“!!</div>"
            end
            target["ê³ í†µê°ì¸"] = target["ê³ í†µê°ì¸"] + 1
            screenEffect = "<div class='mark'>ğŸª± ê³ í†µê°ì¸ íšë“!!</div>"
            setChatVar(triggerId, "screenEffect", screenEffect)
            return --í•˜ë‚˜ì˜ ê°ì¸ì„ ì–»ìœ¼ë©´ ë‹¤ë¥¸ ê°ì¸ì€ ì–»ì„ ìˆ˜ ì—†ë„ë¡ í•¨ìˆ˜ ì¢…ë£Œ
        end
    end

    --ê³µí¬ê°ì¸
    if target["ê³µí¬ê°ì¸"] < 3 then
        local maxP = math.max(stats["ê³µí¬"], (stats["êµ´ë³µ"]+stats["ê³ í†µ"]+stats["ë¶ˆì¾Œ"])*0.1 + stats["ê³µí¬"]*0.5)
        if maxP > markBase * EXPtbl[markSum] then
            if maxP > markBase * EXPtbl[markSum+1] then
                if maxP > markBase * EXPtbl[markSum+2] then
                    target["ê³µí¬ê°ì¸"] = target["ê³µí¬ê°ì¸"] + 3
                    screenEffect = "<div class='mark'>ğŸ©» ê³µí¬ê°ì¸+3 íšë“!!</div>"
                end
                target["ê³µí¬ê°ì¸"] = target["ê³µí¬ê°ì¸"] + 2
                screenEffect = "<div class='mark'>ğŸ©» ê³µí¬ê°ì¸+2 íšë“!!</div>"
            end
            target["ê³µí¬ê°ì¸"] = target["ê³µí¬ê°ì¸"] + 1
            screenEffect = "<div class='mark'>ğŸ©» ê³µí¬ê°ì¸ íšë“!!</div>"
            setChatVar(triggerId, "screenEffect", screenEffect)
            return --í•˜ë‚˜ì˜ ê°ì¸ì„ ì–»ìœ¼ë©´ ë‹¤ë¥¸ ê°ì¸ì€ ì–»ì„ ìˆ˜ ì—†ë„ë¡ í•¨ìˆ˜ ì¢…ë£Œ
        end
    end

    --ë³µì¢…ê°ì¸
    if target["ë³µì¢…ê°ì¸"] < 3 then
        local maxP = math.max(stats["ì˜¨ìˆœ"], (stats["ìš•ì •"]+stats["êµ´ë³µ"])*0.15 + stats["ì˜¨ìˆœ"]*0.5)
        if maxP > markBase * EXPtbl[markSum] then
            if maxP > markBase * EXPtbl[markSum+1] then
                if maxP > markBase * EXPtbl[markSum+2] then
                    target["ë³µì¢…ê°ì¸"] = target["ë³µì¢…ê°ì¸"] + 3
                    screenEffect = "<div class='mark'>ğŸ™ ë³µì¢…ê°ì¸+3 íšë“!!</div>"
                end
                target["ë³µì¢…ê°ì¸"] = target["ë³µì¢…ê°ì¸"] + 2
                screenEffect = "<div class='mark'>ğŸ™ ë³µì¢…ê°ì¸+2 íšë“!!</div>"
            end
            target["ë³µì¢…ê°ì¸"] = target["ë³µì¢…ê°ì¸"] + 1
            screenEffect = "<div class='mark'>ğŸ™ ë³µì¢…ê°ì¸ íšë“!!</div>"
            setChatVar(triggerId, "screenEffect", screenEffect)
            return --í•˜ë‚˜ì˜ ê°ì¸ì„ ì–»ìœ¼ë©´ ë‹¤ë¥¸ ê°ì¸ì€ ì–»ì„ ìˆ˜ ì—†ë„ë¡ í•¨ìˆ˜ ì¢…ë£Œ
        end
    end

    --ì¹˜ìš•ê°ì¸
    if target["ì¹˜ìš•ê°ì¸"] < 3 then
        local maxP = math.max(stats["ìˆ˜ì¹˜"], stats["êµ´ë³µ"]*0.4 + stats["ìˆ˜ì¹˜"]*0.4)
        if maxP > markBase * EXPtbl[markSum] then
            if maxP > markBase * EXPtbl[markSum+1] then
                if maxP > markBase * EXPtbl[markSum+2] then
                    target["ì¹˜ìš•ê°ì¸"] = target["ì¹˜ìš•ê°ì¸"] + 3
                    screenEffect = "<div class='mark'>â›“ï¸â€ğŸ’¥ ì¹˜ìš•ê°ì¸+3 íšë“!!</div>"
                end
                target["ì¹˜ìš•ê°ì¸"] = target["ì¹˜ìš•ê°ì¸"] + 2
                screenEffect = "<div class='mark'>â›“ï¸â€ğŸ’¥ ì¹˜ìš•ê°ì¸+2 íšë“!!</div>"
            end
            target["ì¹˜ìš•ê°ì¸"] = target["ì¹˜ìš•ê°ì¸"] + 1
            screenEffect = "<div class='mark'>â›“ï¸â€ğŸ’¥ ì¹˜ìš•ê°ì¸ íšë“!!</div>"
            setChatVar(triggerId, "screenEffect", screenEffect)
            return --í•˜ë‚˜ì˜ ê°ì¸ì„ ì–»ìœ¼ë©´ ë‹¤ë¥¸ ê°ì¸ì€ ì–»ì„ ìˆ˜ ì—†ë„ë¡ í•¨ìˆ˜ ì¢…ë£Œ
        end
    end

    --ì¾Œë½ê°ì¸
    if target["ì¾Œë½ê°ì¸"] < 3 then
        local maxP = math.max(stats["Cì¾Œë½"], stats["Vì¾Œë½"], stats["Bì¾Œë½"], stats["Aì¾Œë½"], stats["Uì¾Œë½"], stats["Mì¾Œë½"], stats["Sì¾Œë½"], (stats["Cì¾Œë½"]+stats["Vì¾Œë½"]+stats["Bì¾Œë½"]+stats["Aì¾Œë½"])*0.2)
        if maxP > markBase * EXPtbl[markSum] then
            if maxP > markBase * EXPtbl[markSum+1] then
                if maxP > markBase * EXPtbl[markSum+2] then
                    target["ì¾Œë½ê°ì¸"] = target["ì¾Œë½ê°ì¸"] + 3
                    screenEffect = "<div class='mark neggative'>â­ ì¾Œë½ê°ì¸+3 íšë“!!</div>"
                end
                target["ì¾Œë½ê°ì¸"] = target["ì¾Œë½ê°ì¸"] + 2
                screenEffect = "<div class='mark neggative'>â­ ì¾Œë½ê°ì¸+2 íšë“!!</div>"
            end
            target["ì¾Œë½ê°ì¸"] = target["ì¾Œë½ê°ì¸"] + 1
            screenEffect = "<div class='mark neggative'>â­ ì¾Œë½ê°ì¸ íšë“!!</div>"
            setChatVar(triggerId, "screenEffect", screenEffect)
            return --í•˜ë‚˜ì˜ ê°ì¸ì„ ì–»ìœ¼ë©´ ë‹¤ë¥¸ ê°ì¸ì€ ì–»ì„ ìˆ˜ ì—†ë„ë¡ í•¨ìˆ˜ ì¢…ë£Œ
        end
    end

end