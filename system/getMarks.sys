function (triggerId, stats)
    local markDB = json.decode(getLoreBookContent(triggerId, "mark.db"))
    local EXPtbl = json.decode(getLoreBookContent(triggerId, "EXPtable.db"))
    local target = getState(triggerId, "target")
    local markBase = 25 --ê°ì¸ íšë“ ë² ì´ìŠ¤ ìˆ˜ì¹˜
    local markSum = 0 --ëª¨ë“  ê°ì¸ì˜ í•©ê³„
    local screenEffect = ""

    for k, _ in pairs(markDB) do
        if target[k] > 0 then
            markSum = markSum + 1
        end
    end

    --ë°˜ë°œê°ì¸
    if target["ë°˜ë°œê°ì¸"] < 3 then
        local maxP = math.max(stats["ì €í•­"], (stats["ìˆ˜ì¹˜"]+stats["ê³ í†µ"]+stats["ë¶ˆì¾Œ"])*0.2 + stats["ì €í•­"]*0.5)
        if maxP > markBase * EXPtbl[markSum] then
            if maxP > markBase * EXPtbl[markSum+1] then
                if maxP > markBase * EXPtbl[markSum+2] then
                    target["ë°˜ë°œê°ì¸"] = target["ë°˜ë°œê°ì¸"] + 3
                    screenEffect = "<div class='mark neggative'>ğŸ’¢ ë°˜ë°œê°ì¸+3 íšë“!!</div>"
                end
                target["ë°˜ë°œê°ì¸"] = target["ë°˜ë°œê°ì¸"] + 2
                screenEffect = "<div class='mark neggative'>ğŸ’¢ ë°˜ë°œê°ì¸+2 íšë“!!</div>"
            end
            target["ë°˜ë°œê°ì¸"] = target["ë°˜ë°œê°ì¸"] + 1
            screenEffect = "<div class='mark neggative'>ğŸ’¢ ë°˜ë°œê°ì¸ íšë“!!</div>"
            setChatVar(triggerId, "screenEffect", screenEffect)
            return --í•˜ë‚˜ì˜ ê°ì¸ì„ ì–»ìœ¼ë©´ ë‹¤ë¥¸ ê°ì¸ì€ ì–»ì„ ìˆ˜ ì—†ë„ë¡ í•¨ìˆ˜ ì¢…ë£Œ
        end
    end

    --ì¾Œë½ê°ì¸
    if target["ì¾Œë½ê°ì¸"] < 3 then
        local maxP = math.max(stats["Cì¾Œë½"], stats["Vì¾Œë½"], stats["Bì¾Œë½"], stats["Aì¾Œë½"], stats["Uì¾Œë½"], stats["Mì¾Œë½"], stats["Sì¾Œë½"], (stats["Cì¾Œë½"]+stats["Vì¾Œë½"]+stats["Bì¾Œë½"]+stats["Aì¾Œë½"])*0.2)
        if maxP > markBase * EXPtbl[markSum] then
            if maxP > markBase * EXPtbl[markSum+1] then
                if maxP > markBase * EXPtbl[markSum+2] then
                    target["ì¾Œë½ê°ì¸"] = target["ì¾Œë½ê°ì¸"] + 3
                    screenEffect = "<div class='mark neggative'>ğŸ’¦ ì¾Œë½ê°ì¸+3 íšë“!!</div>"
                end
                target["ì¾Œë½ê°ì¸"] = target["ì¾Œë½ê°ì¸"] + 2
                screenEffect = "<div class='mark neggative'>ğŸ’¦ ì¾Œë½ê°ì¸+2 íšë“!!</div>"
            end
            target["ì¾Œë½ê°ì¸"] = target["ì¾Œë½ê°ì¸"] + 1
            screenEffect = "<div class='mark neggative'>ğŸ’¦ ì¾Œë½ê°ì¸ íšë“!!</div>"
            setChatVar(triggerId, "screenEffect", screenEffect)
            return --í•˜ë‚˜ì˜ ê°ì¸ì„ ì–»ìœ¼ë©´ ë‹¤ë¥¸ ê°ì¸ì€ ì–»ì„ ìˆ˜ ì—†ë„ë¡ í•¨ìˆ˜ ì¢…ë£Œ
        end
    end

end