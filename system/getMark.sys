function (triggerId, stats, target)
    local markDB = json.decode(getLoreBookContent(triggerId, "mark.db"))
    local EXPtbl = json.decode(getLoreBookContent(triggerId, "EXPtable.db"))
    local target = target
    local markBase = 0.1 --ê°ì¸ íšë“ ë² ì´ìŠ¤ ìˆ˜ì¹˜
    local markSum = 0 --ëª¨ë“  ê°ì¸ì˜ í•©ê³„
    local screenEffect = ""

    for k, _ in pairs(markDB) do
        if tonumber(target[k]) > 0 then
            markSum = markSum + 1
        end
    end

    --ë°˜ë°œê°ì¸
    if tonumber(target["ë°˜ë°œê°ì¸"]) < 3 then
        local maxP = math.max(stats["ì €í•­"], (stats["ìˆ˜ì¹˜"]+stats["ê³ í†µ"]+stats["ë¶ˆì¾Œ"])*0.1 + stats["ì €í•­"]*0.5)
        if maxP > markBase * EXPtbl[tostring(markSum+2)] then
            target["ë°˜ë°œê°ì¸"] = "3"
            screenEffect = "<div class='getMark'><div class='getMarkText neggative'>ğŸ’¢ ë°˜ë°œê°ì¸ Lv.3 íšë“!!</div></div>"
        elseif maxP > markBase * EXPtbl[tostring(markSum+1)] then
            target["ë°˜ë°œê°ì¸"] = tostring(math.max(target["ë°˜ë°œê°ì¸"] + 2, 3))
            screenEffect = "<div class='getMark'><div class='getMarkText neggative'>ğŸ’¢ ë°˜ë°œê°ì¸ Lv."..target["ë°˜ë°œê°ì¸"].." íšë“!!</div></div>"
        elseif maxP > markBase * EXPtbl[tostring(markSum)] then
            target["ë°˜ë°œê°ì¸"] = tostring(target["ë°˜ë°œê°ì¸"] + 1)
            screenEffect = "<div class='getMark'><div class='getMarkText neggative'>ğŸ’¢ ë°˜ë°œê°ì¸ Lv."..target["ë°˜ë°œê°ì¸"].." íšë“!!</div></div>"
        end
        setChatVar(triggerId, "screenEffect", screenEffect)
        return target --í•˜ë‚˜ì˜ ê°ì¸ì„ ì–»ìœ¼ë©´ ë‹¤ë¥¸ ê°ì¸ì€ ì–»ì„ ìˆ˜ ì—†ë„ë¡ í•¨ìˆ˜ ì¢…ë£Œí•˜ê³  targetë³€ìˆ˜ ì „ë‹¬
    end

    --ê³ í†µê°ì¸
    if tonumber(target["ê³ í†µê°ì¸"]) < 3 then
        local maxP = math.max(stats["ê³ í†µ"], (stats["ê³µí¬"]+stats["ë¶ˆì¾Œ"])*0.15 + stats["ê³ í†µ"]*0.5)
        if maxP > markBase * EXPtbl[tostring(markSum+2)] then
            target["ê³ í†µê°ì¸"] = "3"
            screenEffect = "<div class='getMark'><div class='getMarkText neggative'>ğŸª± ê³ í†µê°ì¸ Lv.3 íšë“!!</div></div>"
        elseif maxP > markBase * EXPtbl[tostring(markSum+1)] then
            target["ê³ í†µê°ì¸"] = tostring(math.max(target["ê³ í†µê°ì¸"] + 2, 3))
            screenEffect = "<div class='getMark'><div class='getMarkText neggative'>ğŸª± ê³ í†µê°ì¸ Lv."..target["ê³ í†µê°ì¸"].." íšë“!!</div></div>"
        elseif maxP > markBase * EXPtbl[tostring(markSum)] then
            target["ê³ í†µê°ì¸"] = tostring(target["ê³ í†µê°ì¸"] + 1)
            screenEffect = "<div class='getMark'><div class='getMarkText neggative'>ğŸª± ê³ í†µê°ì¸ Lv."..target["ê³ í†µê°ì¸"].." íšë“!!</div></div>"
        end
        setChatVar(triggerId, "screenEffect", screenEffect)
        return target --í•˜ë‚˜ì˜ ê°ì¸ì„ ì–»ìœ¼ë©´ ë‹¤ë¥¸ ê°ì¸ì€ ì–»ì„ ìˆ˜ ì—†ë„ë¡ í•¨ìˆ˜ ì¢…ë£Œí•˜ê³  targetë³€ìˆ˜ ì „ë‹¬
    end

    --ê³µí¬ê°ì¸
    if tonumber(target["ê³µí¬ê°ì¸"]) < 3 then
        local maxP = math.max(stats["ê³µí¬"], (stats["êµ´ë³µ"]+stats["ê³ í†µ"]+stats["ë¶ˆì¾Œ"])*0.1 + stats["ê³µí¬"]*0.5)
        if maxP > markBase * EXPtbl[tostring(markSum+2)] then
            target["ê³µí¬ê°ì¸"] = "3"
            screenEffect = "<div class='getMark'><div class='getMarkText neggative'>ğŸ©» ê³µí¬ê°ì¸ Lv.3 íšë“!!</div></div>"
        elseif maxP > markBase * EXPtbl[tostring(markSum+1)] then
            target["ê³µí¬ê°ì¸"] = tostring(math.max(target["ê³µí¬ê°ì¸"] + 2, 3))
            screenEffect = "<div class='getMark'><div class='getMarkText neggative'>ğŸ©» ê³µí¬ê°ì¸ Lv."..target["ê³µí¬ê°ì¸"].." íšë“!!</div></div>"
        elseif maxP > markBase * EXPtbl[tostring(markSum)] then
            target["ê³µí¬ê°ì¸"] = tostring(target["ê³µí¬ê°ì¸"] + 1)
            screenEffect = "<div class='getMark'><div class='getMarkText neggative'>ğŸ©» ê³µí¬ê°ì¸ Lv."..target["ê³µí¬ê°ì¸"].." íšë“!!</div></div>"
        end
        setChatVar(triggerId, "screenEffect", screenEffect)
        return target --í•˜ë‚˜ì˜ ê°ì¸ì„ ì–»ìœ¼ë©´ ë‹¤ë¥¸ ê°ì¸ì€ ì–»ì„ ìˆ˜ ì—†ë„ë¡ í•¨ìˆ˜ ì¢…ë£Œí•˜ê³  targetë³€ìˆ˜ ì „ë‹¬
    end

    --ë³µì¢…ê°ì¸
    if tonumber(target["ë³µì¢…ê°ì¸"]) < 3 then
        local maxP = math.max(stats["ì˜¨ìˆœ"], (stats["ìš•ì •"]+stats["êµ´ë³µ"])*0.15 + stats["ì˜¨ìˆœ"]*0.5)
        if maxP > markBase * EXPtbl[tostring(markSum+2)] then
            target["ë³µì¢…ê°ì¸"] = "3"
            screenEffect = "<div class='getMark'><div class='getMarkText neggative'>ğŸ™ ë³µì¢…ê°ì¸ Lv.3 íšë“!!</div></div>"
        elseif maxP > markBase * EXPtbl[tostring(markSum+1)] then
            target["ë³µì¢…ê°ì¸"] = tostring(math.max(target["ë³µì¢…ê°ì¸"] + 2, 3))
            screenEffect = "<div class='getMark'><div class='getMarkText neggative'>ğŸ™ ë³µì¢…ê°ì¸ Lv."..target["ë³µì¢…ê°ì¸"].." íšë“!!</div></div>"
        elseif maxP > markBase * EXPtbl[tostring(markSum)] then
            target["ë³µì¢…ê°ì¸"] = tostring(target["ë³µì¢…ê°ì¸"] + 1)
            screenEffect = "<div class='getMark'><div class='getMarkText neggative'>ğŸ™ ë³µì¢…ê°ì¸ Lv."..target["ë³µì¢…ê°ì¸"].." íšë“!!</div></div>"
        end
        setChatVar(triggerId, "screenEffect", screenEffect)
        return target --í•˜ë‚˜ì˜ ê°ì¸ì„ ì–»ìœ¼ë©´ ë‹¤ë¥¸ ê°ì¸ì€ ì–»ì„ ìˆ˜ ì—†ë„ë¡ í•¨ìˆ˜ ì¢…ë£Œí•˜ê³  targetë³€ìˆ˜ ì „ë‹¬
    end

    --ì¹˜ìš•ê°ì¸
    if tonumber(target["ì¹˜ìš•ê°ì¸"]) < 3 then
        local maxP = math.max(stats["ìˆ˜ì¹˜"], stats["êµ´ë³µ"]*0.4 + stats["ìˆ˜ì¹˜"]*0.4)
        if maxP > markBase * EXPtbl[tostring(markSum+2)] then
            target["ì¹˜ìš•ê°ì¸"] = "3"
            screenEffect = "<div class='getMark'><div class='getMarkText neggative'>â›“ï¸â€ğŸ’¥ ì¹˜ìš•ê°ì¸ Lv.3 íšë“!!</div></div>"
        elseif maxP > markBase * EXPtbl[tostring(markSum+1)] then
            target["ì¹˜ìš•ê°ì¸"] = tostring(math.max(target["ì¹˜ìš•ê°ì¸"] + 2, 3))
            screenEffect = "<div class='getMark'><div class='getMarkText neggative'>â›“ï¸â€ğŸ’¥ ì¹˜ìš•ê°ì¸ Lv."..target["ì¹˜ìš•ê°ì¸"].." íšë“!!</div></div>"
        elseif maxP > markBase * EXPtbl[tostring(markSum)] then
            target["ì¹˜ìš•ê°ì¸"] = tostring(target["ì¹˜ìš•ê°ì¸"] + 1)
            screenEffect = "<div class='getMark'><div class='getMarkText neggative'>â›“ï¸â€ğŸ’¥ ì¹˜ìš•ê°ì¸ Lv."..target["ì¹˜ìš•ê°ì¸"].." íšë“!!</div></div>"
        end
        setChatVar(triggerId, "screenEffect", screenEffect)
        return target --í•˜ë‚˜ì˜ ê°ì¸ì„ ì–»ìœ¼ë©´ ë‹¤ë¥¸ ê°ì¸ì€ ì–»ì„ ìˆ˜ ì—†ë„ë¡ í•¨ìˆ˜ ì¢…ë£Œí•˜ê³  targetë³€ìˆ˜ ì „ë‹¬
    end

    --ì¾Œë½ê°ì¸
    if tonumber(target["ì¾Œë½ê°ì¸"]) < 3 then
        local maxP = math.max(stats["Cì¾Œë½"], stats["Vì¾Œë½"], stats["Bì¾Œë½"], stats["Aì¾Œë½"], stats["Uì¾Œë½"], stats["Mì¾Œë½"], stats["Sì¾Œë½"], (stats["Cì¾Œë½"]+stats["Vì¾Œë½"]+stats["Bì¾Œë½"]+stats["Aì¾Œë½"])*0.2)
        if maxP > markBase * EXPtbl[tostring(markSum+2)] then
            target["ì¾Œë½ê°ì¸"] = "3"
            screenEffect = "<div class='getMark'><div class='getMarkText neggative'>â­ ì¾Œë½ê°ì¸ Lv.3 íšë“!!</div></div>"
        elseif maxP > markBase * EXPtbl[tostring(markSum+1)] then
            target["ì¾Œë½ê°ì¸"] = tostring(math.max(target["ì¾Œë½ê°ì¸"] + 2, 3))
            screenEffect = "<div class='getMark'><div class='getMarkText neggative'>â­ ì¾Œë½ê°ì¸ Lv."..target["ì¾Œë½ê°ì¸"].." íšë“!!</div></div>"
        elseif maxP > markBase * EXPtbl[tostring(markSum)] then
            target["ì¾Œë½ê°ì¸"] = tostring(target["ì¾Œë½ê°ì¸"] + 1)
            screenEffect = "<div class='getMark'><div class='getMarkText neggative'>â­ ì¾Œë½ê°ì¸ Lv."..target["ì¾Œë½ê°ì¸"].." íšë“!!</div></div>"
        end
        setChatVar(triggerId, "screenEffect", screenEffect)
        return target --í•˜ë‚˜ì˜ ê°ì¸ì„ ì–»ìœ¼ë©´ ë‹¤ë¥¸ ê°ì¸ì€ ì–»ì„ ìˆ˜ ì—†ë„ë¡ í•¨ìˆ˜ ì¢…ë£Œí•˜ê³  targetë³€ìˆ˜ ì „ë‹¬
    end

end